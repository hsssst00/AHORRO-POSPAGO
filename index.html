<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Ventas Pro</title>
    <style>
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f0f4f8; margin: 0; padding: 15px; }
        .container { max-width: 420px; margin: 0 auto; background: white; padding: 20px; border-radius: 18px; box-shadow: 0 4px 25px rgba(0,0,0,0.06); }
        h2 { text-align: center; color: #1a237e; margin-top: 0; font-size: 1.4em; }
        
        /* Inputs */
        label { display: block; margin-top: 12px; margin-bottom: 4px; color: #546e7a; font-weight: 700; font-size: 0.9em; }
        input, select { width: 100%; padding: 12px; border: 1px solid #cfd8dc; border-radius: 8px; box-sizing: border-box; font-size: 16px; background-color: #fff; }
        input:focus, select:focus { border-color: #3949ab; outline: none; background-color: #e8eaf6; }
        
        /* Checkbox Promo */
        .promo-toggle { margin-top: 15px; background: #f3e5f5; padding: 10px; border-radius: 8px; display: flex; align-items: center; border: 1px solid #e1bee7; }
        .promo-toggle input { width: auto; margin-right: 10px; transform: scale(1.3); }
        .promo-toggle label { margin: 0; color: #7b1fa2; cursor: pointer; }
        
        button { width: 100%; padding: 16px; background-color: #304ffe; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 800; text-transform: uppercase; cursor: pointer; margin-top: 20px; box-shadow: 0 4px 10px rgba(48, 79, 254, 0.2); transition: transform 0.1s; }
        button:active { transform: scale(0.98); }

        /* RESULTADOS */
        .result-section { margin-top: 25px; display: none; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        /* 1. CAJA DE AHORRO ANUAL */
        .hero-box { background: linear-gradient(135deg, #ffca28, #ff6f00); color: white; padding: 15px; border-radius: 12px; text-align: center; margin-bottom: 15px; box-shadow: 0 8px 20px rgba(255, 111, 0, 0.25); position: relative; overflow: hidden; }
        .hero-label { font-size: 0.85em; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.9; font-weight: bold; }
        .hero-val { font-size: 38px; font-weight: 900; margin: 5px 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        .hero-sub { font-size: 0.95em; font-style: italic; background: rgba(255,255,255,0.2); display: inline-block; padding: 2px 10px; border-radius: 20px; }

        /* 2. PROMO BADGE */
        .promo-badge { background-color: #7b1fa2; color: white; padding: 10px; border-radius: 8px; text-align: center; margin-bottom: 15px; font-weight: bold; font-size: 0.9em; box-shadow: 0 4px 10px rgba(123, 31, 162, 0.2); }

        /* 3. FACILIDAD DE PAGO */
        .payment-box { background-color: #e8f5e9; border: 1px solid #a5d6a7; border-radius: 12px; padding: 15px; margin-bottom: 15px; }
        .payment-title { text-align: center; color: #2e7d32; font-weight: 800; text-transform: uppercase; font-size: 0.8em; margin-bottom: 10px; letter-spacing: 1px; }
        .payment-grid { display: flex; justify-content: space-between; gap: 10px; }
        .payment-item { flex: 1; text-align: center; background: white; padding: 10px 5px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .pay-label { font-size: 0.75em; color: #666; display: block; margin-bottom: 2px; }
        .pay-amount { font-size: 1.2em; font-weight: bold; color: #2e7d32; }

        /* 4. COMPARATIVA MENSUAL DETALLADA */
        .monthly-card { background: #fff; border: 1px solid #eee; border-radius: 8px; padding: 10px; }
        .monthly-row { display: flex; justify-content: space-between; align-items: center; font-size: 0.9em; padding: 8px 5px; border-bottom: 1px solid #f5f5f5; color: #555; }
        .val-bad { color: #d32f2f; text-decoration: line-through; }
        .val-good { color: #388e3c; font-weight: bold; font-size: 1.1em; }
        
        /* ESTILO PARA LA DIFERENCIA NOMINAL (NUEVO) */
        .diff-row { border-top: 1px dashed #bdbdbd; border-bottom: none; margin-top: 5px; padding-top: 10px; font-weight: bold; font-size: 1em; }

        .hidden { display: none; }
        
        /* Negativos */
        .negative-mode .hero-box { background: linear-gradient(135deg, #78909c, #455a64); }
        .negative-mode .payment-box { background-color: #fff3e0; border-color: #ffe0b2; }
        .negative-mode .pay-amount { color: #ef6c00; }

        @keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

<div class="container">
    <h2>üìä Calculadora de Ventas</h2>

    <label>Consumo actual del cliente:</label>
    <select id="tipoConsumo" onchange="toggleInputs()">
        <option value="recarga">Usa Recargas (Prepago)</option>
        <option value="factura">Tiene Factura Fija</option>
    </select>

    <div id="inputRecargas">
        <div style="display: flex; gap: 10px;">
            <div style="flex: 1;">
                <label>Monto ($):</label>
                <input type="number" id="montoRecarga" placeholder="Ej: 3.00" inputmode="decimal">
            </div>
            <div style="flex: 1;">
                <label>Duraci√≥n:</label>
                <select id="frecuenciaRecarga">
                    <option value="1">1 d√≠a</option>
                    <option value="2">2 d√≠as</option>
                    <option value="3">3 d√≠as</option>
                    <option value="4">4 d√≠as</option>
                    <option value="5">5 d√≠as</option>
                    <option value="7">7 d√≠as</option>
                    <option value="10">10 d√≠as</option>
                    <option value="15">15 d√≠as</option>
                    <option value="30">Mensual (30 d√≠as)</option>
                </select>
            </div>
        </div>
    </div>

    <div id="inputFactura" class="hidden">
        <label>Su factura actual ($):</label>
        <input type="number" id="montoMensual" placeholder="Ej: 35.00" inputmode="decimal">
    </div>

    <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0;">

    <div class="promo-toggle">
        <input type="checkbox" id="checkPromo" onchange="togglePromo()">
        <label for="checkPromo">¬øHay precio de oferta?</label>
    </div>

    <div id="divPrecioLista" class="hidden" style="margin-top: 10px;">
        <label style="color: #7b1fa2;">Precio Regular (Sin descuento):</label>
        <input type="number" id="precioLista" placeholder="Ej: 40.00" inputmode="decimal">
    </div>

    <label style="color: #304ffe;">Precio Final al Cliente ($):</label>
    <input type="number" id="miPrecio" placeholder="Ej: 25.00" inputmode="decimal">

    <button onclick="calcular()">VER BENEFICIOS</button>

    <div id="resultados" class="result-section">
        
        <div class="hero-box">
            <div id="heroLabel" class="hero-label">Ahorro Anual Proyectado</div>
            <div id="resAnual" class="hero-val">$0.00</div>
            <div id="heroSub" class="hero-sub">¬°Dinero a tu favor!</div>
        </div>

        <div id="cardPromo" class="promo-badge hidden">
            üéÅ Ahorras $0 extra por Precio de Oferta
        </div>

        <div class="payment-box">
            <div class="payment-title">‚ö° Facilidad de Pago</div>
            <div style="font-size: 0.85em; text-align: center; color: #555; margin-bottom: 8px;">
                Puedes realizar abonos parciales:
            </div>
            <div class="payment-grid">
                <div class="payment-item">
                    <span class="pay-label">Semanal</span>
                    <span id="pagoSemanal" class="pay-amount">$0.00</span>
                </div>
                <div class="payment-item">
                    <span class="pay-label">Quincenal</span>
                    <span id="pagoQuincenal" class="pay-amount">$0.00</span>
                </div>
            </div>
        </div>

        <div class="monthly-card">
            <div class="monthly-row">
                <span>Gasto Actual:</span>
                <span id="txtActual" class="val-bad">$0.00</span>
            </div>
            <div class="monthly-row">
                <span>Nuevo Plan:</span>
                <span id="txtNuevo" class="val-good">$0.00</span>
            </div>
            
            <div class="monthly-row diff-row">
                <span id="lblDifNominal">Diferencia Neta:</span>
                <span id="txtDifNominal">$0.00</span>
            </div>
            
            <div id="txtPorcentaje" style="text-align: right; font-size: 0.8em; color: #888; margin-top: 5px;"></div>
        </div>

    </div>
</div>

<script>
    function toggleInputs() {
        const tipo = document.getElementById('tipoConsumo').value;
        if (tipo === 'recarga') {
            document.getElementById('inputRecargas').classList.remove('hidden');
            document.getElementById('inputFactura').classList.add('hidden');
        } else {
            document.getElementById('inputRecargas').classList.add('hidden');
            document.getElementById('inputFactura').classList.remove('hidden');
        }
    }

    function togglePromo() {
        const isChecked = document.getElementById('checkPromo').checked;
        if (isChecked) {
            document.getElementById('divPrecioLista').classList.remove('hidden');
        } else {
            document.getElementById('divPrecioLista').classList.add('hidden');
            document.getElementById('precioLista').value = ""; 
        }
    }

    function calcular() {
        // Datos
        let gastoActual = 0;
        const tipo = document.getElementById('tipoConsumo').value;

        if (tipo === 'recarga') {
            const monto = parseFloat(document.getElementById('montoRecarga').value) || 0;
            const dias = parseInt(document.getElementById('frecuenciaRecarga').value);
            gastoActual = (30 / dias) * monto;
        } else {
            gastoActual = parseFloat(document.getElementById('montoMensual').value) || 0;
        }

        const miPrecio = parseFloat(document.getElementById('miPrecio').value) || 0;
        if (miPrecio === 0) return;

        // C√°lculos Promo
        const checkPromo = document.getElementById('checkPromo').checked;
        const precioLista = parseFloat(document.getElementById('precioLista').value) || 0;

        // Renderizar
        const resultados = document.getElementById('resultados');
        resultados.classList.remove('result-section');
        void resultados.offsetWidth; 
        resultados.classList.add('result-section');
        resultados.style.display = 'block';

        // L√≥gica Principal
        const difMensual = gastoActual - miPrecio;
        const difAnual = difMensual * 12;
        const porcentaje = gastoActual > 0 ? ((difMensual / gastoActual) * 100).toFixed(0) : 0;

        // Referencias DOM
        const resAnual = document.getElementById('resAnual');
        const heroLabel = document.getElementById('heroLabel');
        const heroSub = document.getElementById('heroSub');
        const txtDifNominal = document.getElementById('txtDifNominal');
        const lblDifNominal = document.getElementById('lblDifNominal');

        document.getElementById('txtActual').innerText = `$${gastoActual.toFixed(2)}`;
        document.getElementById('txtNuevo').innerText = `$${miPrecio.toFixed(2)}`;

        if (difMensual >= 0) {
            // -- AHORRO --
            resultados.classList.remove('negative-mode');
            
            // Header Anual
            heroLabel.innerText = "üî• Ahorro Anual Total";
            resAnual.innerText = `$${difAnual.toFixed(2)}`;
            heroSub.innerText = `¬°Es como recibir un bono extra!`;
            
            // Diferencia Nominal
            lblDifNominal.innerText = "‚úÖ Ahorro Mensual:";
            txtDifNominal.innerText = `$${difMensual.toFixed(2)}`;
            txtDifNominal.style.color = "#388e3c"; // Verde

            document.getElementById('txtPorcentaje').innerText = `Tu factura baja un ${porcentaje}%`;

        } else {
            // -- INVERSI√ìN (Plan m√°s caro) --
            resultados.classList.add('negative-mode');
            
            const costoDiario = (Math.abs(difMensual) / 30).toFixed(2);
            const costoExtra = Math.abs(difMensual).toFixed(2);
            
            // Header Anual (Cambia a costo diario)
            heroLabel.innerText = "Inversi√≥n Diaria";
            resAnual.innerText = `$${costoDiario}`;
            heroSub.innerText = "Costo por tener ILIMITADO al d√≠a";
            
            // Diferencia Nominal
            lblDifNominal.innerText = "‚ö° Diferencia a pagar:";
            txtDifNominal.innerText = `$${costoExtra}`;
            txtDifNominal.style.color = "#ef6c00"; // Naranja

            document.getElementById('txtPorcentaje').innerText = "Diferencia por mejora de servicio";
        }

        // Facilidad de Pago
        document.getElementById('pagoSemanal').innerText = `$${(miPrecio / 4).toFixed(2)}`;
        document.getElementById('pagoQuincenal').innerText = `$${(miPrecio / 2).toFixed(2)}`;

        // Promo Badge
        const cardPromo = document.getElementById('cardPromo');
        if (checkPromo && precioLista > miPrecio) {
            const ahorroPromo = precioLista - miPrecio;
            const porcPromo = ((ahorroPromo / precioLista) * 100).toFixed(0);
            cardPromo.innerText = `üéÅ ¬°Oferta activada! Te ahorras $${ahorroPromo.toFixed(2)} sobre el precio regular (${porcPromo}% OFF)`;
            cardPromo.classList.remove('hidden');
        } else {
            cardPromo.classList.add('hidden');
        }
    }
</script>

</body>
</html>
